version: '3'
services:
    boards:
      build: ./boards
      image: "boards"
      container_name: infrac-stak-board
      restart: unless-stopped
      stdin_open: true
      tty:  true
      privileged: false
      ports:
        - "2000:80/tcp"
    ci:
      build: ./ci
      image: "ci"
      container_name: infrac-stak-ci
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
       - ACCEPT_EULA=Y
      ports:
        - "2010:8080/tcp" #Jenkins is hosted on 8080/tcp
    dhcp:
      build: ./dhcp
      image: "dhcp"
      container_name: infrac-stak-dhcp
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "67:67/udp"
        - "68:68/udp"
    dns:
      build: ./dns
      image: "dns"
      container_name: infrac-stak-dns
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "53:53/tcp"
    firewall:
      build: ./firewall
      image: "firewall"
      container_name: infrac-stak-firewall
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "75:75/tcp"
    git:
      build: ./git
      image: "git"
      container_name: infrac-stak-git
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "1020:3306"
        - "1030:22/tcp"
        - "1035:80/tcp"
        - "1040:443/tcp"
    ldap:
      build: ./ldap
      image: "ldap"
      container_name: infrac-stak-ldap
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "389:389/tcp"
    logging:
      build: ./logging
      image: "logging"
      container_name: infrac-stak-logging
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "2030:444/tcp"
    monitoring:
      build: ./monitoring
      image: "monitoring"
      container_name: infrac-stak-monitoring
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "2040:5666/udp"    
    no-sql:
      build: ./no-sql
      image: "no-sql"
      container_name: infrac-stak-no-sql
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "27017:27017/tcp"
    servicedesk:
      build: ./servicedesk
      image: "servicedesk"
      container_name: infrac-stak-servicedesk
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "2050:83/udp"
    sql:
      build: ./sql
      image: "sql"
      container_name: infrac-stak-sql
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "2055:3306/tcp"
        - "2058:33060/tcp"
    web-server:
      build: ./web-server
      image: "web-server"
      container_name: infrac-stak-web-server
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "2060:80/tcp"
        - "2070:443/tcp"
    webmin:
      build: ./webmin
      image: "webmin"
      container_name: infrac-stak-webmin
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "2080:80/tcp"
        - "2090:139/tcp"
        - "2100:445/tcp"
    wiki:
      build: ./wiki
      image: "wiki"
      container_name: infrac-stak-wiki
      restart: unless-stopped
      stdin_open: true
      tty:  true
      environment:
        - ACCEPT_EULA=Y
      ports:
        - "2110:80/tcp"
